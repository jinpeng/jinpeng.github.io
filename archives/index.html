
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Jinpeng&#39;s Blog">
    <title>归档 - Jinpeng&#39;s Blog</title>
    <meta name="author" content="Dong Jinpeng">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Jinpeng&#39;s Blog">
<meta property="og:url" content="http://jinpeng.github.io/archives/index.html">
<meta property="og:site_name" content="Jinpeng&#39;s Blog">
<meta property="og:locale" content="zh-cn">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jinpeng&#39;s Blog">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-1udptkpril81ozu8ifd8zpujn7ipu7lefxsiu5gxx0dpnzntdx6dusvki3ao.min.css">
    <!--STYLES END--><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    

    
</head>

    <body>
        <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Jinpeng&#39;s Blog</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="首页"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="分类"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="标签"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="归档"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="搜索"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="关于"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                            title="RSS"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2017/08/23/Math-for-Deep-Learning-Linear-Algebra/">
                            Math for Deep Learning Linear Algebra
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2017-08-23T13:56:38+08:00">
	
		    8月 23, 2017
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Math-for-Deep-Learning-Linear-Algebra"><a href="#Math-for-Deep-Learning-Linear-Algebra" class="headerlink" title="Math for Deep Learning: Linear Algebra"></a>Math for Deep Learning: Linear Algebra</h1><h3 id="Scalar-Vector-Matrix-and-Tensor"><a href="#Scalar-Vector-Matrix-and-Tensor" class="headerlink" title="Scalar, Vector, Matrix and Tensor"></a>Scalar, Vector, Matrix and Tensor</h3><p>Scalar: </p>

                    
                        

                    
                    
                        <p>
                            <a href="/2017/08/23/Math-for-Deep-Learning-Linear-Algebra/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2016/09/29/Install-WebRTC-AppRTC-Server/">
                            Install WebRTC/AppRTC Server
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2016-09-29T17:30:31+08:00">
	
		    9月 29, 2016
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Environment"><a href="#Environment" class="headerlink" title="Environment:"></a>Environment:</h1><p>Aliyun HK ECS instance, Ubuntu 14.04, Golang, NodeJS installed.<br>Us domain mydomain.com, IP address xxx.xxx.xxx.xxx.</p>
<h1 id="Install-TURN-Traversal-Using-Relays-around-NAT-server"><a href="#Install-TURN-Traversal-Using-Relays-around-NAT-server" class="headerlink" title="Install TURN (Traversal Using Relays around NAT server)"></a>Install TURN (Traversal Using Relays around NAT server)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/webrtc</span><br><span class="line">$ wget http://turnserver.open-sys.org/downloads/v4.4.5.3/turnserver-4.4.5.3-debian-wheezy-ubuntu-mint-x86-64bits.tar.gz</span><br><span class="line">$ tar xvfz turnserver-4.4.5.3-debian-wheezy-ubuntu-mint-x86-64bits.tar.gz</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install gdebi-core</span><br><span class="line">$ sudo gdebi coturn*.deb</span><br><span class="line">$ vim /etc/default/coturn</span><br></pre></td></tr></table></figure>
<p>Uncomment the following line:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TURNSERVER_ENABLED=1</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo openssl req -x509 -newkey rsa:2048 -keyout   /etc/turn_server_pkey.pem -out /etc/turn_server_cert.pem -days 99999 -nodes</span><br><span class="line">$ vim /etc/turnserver.conf</span><br></pre></td></tr></table></figure>
<p>Set the following parameters:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">listening-device=eth0</span><br><span class="line">listening-port=3478</span><br><span class="line">listening-ip=xxx.xxx.xxx.xxx</span><br><span class="line">listening-ip=xx.xx.xx.xx</span><br><span class="line">stale-nonce</span><br><span class="line">cert=/etc/turn_server_cert.pem</span><br><span class="line">pkey=/etc/turn_server_pkey.pem</span><br><span class="line">no-stdout-log</span><br><span class="line">log-file=/var/tmp/turn.log</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ service coturn start</span><br></pre></td></tr></table></figure>
<h1 id="Install-Collider-Signalling-Server"><a href="#Install-Collider-Signalling-Server" class="headerlink" title="Install Collider (Signalling Server)"></a>Install Collider (Signalling Server)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir ~/webrtc</span><br><span class="line">$ <span class="built_in">cd</span> ~/webrtc</span><br><span class="line">$ git <span class="built_in">clone</span> --depth=1 https://github.com/webrtc/apprtc.git</span><br><span class="line">$ ln -s `<span class="built_in">pwd</span>`/apprtc/src/collider/collider <span class="variable">$GOPATH</span>/src</span><br><span class="line">$ ln -s `<span class="built_in">pwd</span>`/apprtc/src/collider/collidermain <span class="variable">$GOPATH</span>/src</span><br><span class="line">$ ln -s `<span class="built_in">pwd</span>`/apprtc/src/collider/collidertest <span class="variable">$GOPATH</span>/src</span><br><span class="line">$ go get collidermain</span><br><span class="line">$ go install collidermain</span><br><span class="line">$ go <span class="built_in">test</span> collider</span><br><span class="line">$ nohup collidermain -port=8089 -room-server=https://mydomain.com &amp;</span><br></pre></td></tr></table></figure>
<h1 id="Install-AppRTC-Room-Server"><a href="#Install-AppRTC-Room-Server" class="headerlink" title="Install AppRTC (Room Server)"></a>Install AppRTC (Room Server)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> apprtc</span><br><span class="line">$ sudo npm -g install grunt-cli</span><br><span class="line">$ sudo apt-get install closure-compiler</span><br><span class="line">$ sudo apt-get install python-webtest</span><br><span class="line">$ vim package.json</span><br></pre></td></tr></table></figure>
<p>change:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"grunt-closurecompiler": "&gt;=0.0.21",</span><br></pre></td></tr></table></figure>
<p>to:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"google-closure-compiler": "latest",</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install</span><br><span class="line">$ vim Gruntfile.js</span><br></pre></td></tr></table></figure>
<p>Replace original closurecompiler with google-closure-compiler</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">grunt</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">'google-closure-compiler'</span>).grunt(grunt);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">    <span class="string">'closure-compiler'</span>: &#123;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// grunt.loadNpmTasks('grunt-closurecompiler');</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">  grunt.registerTask(<span class="string">'jstests'</span>, [<span class="string">'shell:genJsEnums'</span>, <span class="string">'closure-compiler:debug'</span>, <span class="string">'grunt-chrome-build'</span>, <span class="string">'jstdPhantom'</span>]);</span><br><span class="line">  <span class="comment">// buildAppEnginePackage must be done before closurecompiler since buildAppEnginePackage resets out/app_engine.</span></span><br><span class="line">  grunt.registerTask(<span class="string">'build'</span>, [<span class="string">'shell:buildAppEnginePackage'</span>, <span class="string">'shell:genJsEnums'</span>, <span class="string">'closure-compiler:debug'</span>, <span class="string">'grunt-chrome-build'</span>]);</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ grunt build</span><br><span class="line">$ vim out/app_engine/constants.py</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">TURN_BASE_URL = <span class="string">'https://mydomain.com'</span></span><br><span class="line"></span><br><span class="line">…</span><br><span class="line"></span><br><span class="line">ICE_SERVER_BASE_URL = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">WSS_INSTANCES = [&#123;</span><br><span class="line">    WSS_INSTANCE_HOST_KEY: <span class="string">'mydomain.com:8089'</span>,</span><br><span class="line">    WSS_INSTANCE_NAME_KEY: <span class="string">'wsserver-std'</span>,</span><br><span class="line">    WSS_INSTANCE_ZONE_KEY: <span class="string">'us-central1-a'</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    WSS_INSTANCE_HOST_KEY: <span class="string">'mydomain.com:8089'</span>,</span><br><span class="line">    WSS_INSTANCE_NAME_KEY: <span class="string">'wsserver-std-2'</span>,</span><br><span class="line">    WSS_INSTANCE_ZONE_KEY: <span class="string">'us-central1-f'</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim out/app_engine/apprtc.py</span><br></pre></td></tr></table></figure>
<p>Since it does not run on GAE, remove the code to retrieve address from memcache.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_wss_parameters</span><span class="params">(request)</span>:</span></span><br><span class="line">  wss_host_port_pair = request.get(<span class="string">'wshpp'</span>)</span><br><span class="line">  wss_tls = request.get(<span class="string">'wstls'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> wss_host_port_pair:</span><br><span class="line">    wss_host_port_pair = constants.WSS_HOST_PORT_PAIRS[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/webrtc</span><br><span class="line">$ wget https://storage.googleapis.com/appengine-sdks/featured/google_appengine_1.9.40.zip</span><br><span class="line">$ sudo apt-get install unzip</span><br><span class="line">$ unzip google_appengine_1.9.40.zip</span><br><span class="line">$ <span class="built_in">echo</span> “<span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:~/webrtc/google_appengine” &gt;&gt; ~/.bashrc</span><br><span class="line">$ <span class="built_in">source</span> ~/.bashrc</span><br><span class="line">$ <span class="built_in">cd</span> ~/webrtc/apprtc</span><br><span class="line">$ nohup dev_appserver.py --host=0.0.0.0 ./out/app_engine &amp;</span><br></pre></td></tr></table></figure>
<h1 id="Install-Nginx"><a href="#Install-Nginx" class="headerlink" title="Install Nginx"></a>Install Nginx</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install nginx</span><br><span class="line">$ service nginx stop</span><br><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ git <span class="built_in">clone</span> git <span class="built_in">clone</span> https://github.com/letsencrypt/letsencrypt</span><br><span class="line">$ <span class="built_in">cd</span> letsencrypt/</span><br><span class="line">$ ./letsencrypt-auto certonly -d mydomain.com -d www.mydomain.com</span><br><span class="line">$ <span class="built_in">cd</span> /opt</span><br><span class="line">$ mkdir dhparam</span><br><span class="line">$ <span class="built_in">cd</span> dhparam</span><br><span class="line">$ mkdir keys</span><br><span class="line">$ <span class="built_in">cd</span> keys</span><br><span class="line">$ openssl dhparam -out dhparams.pem 2048</span><br><span class="line">$ <span class="built_in">cd</span> ..</span><br><span class="line">$ sudo chmod 700 keys</span><br><span class="line">$ vim /etc/nginx/conf.d/mydomain.com.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">upstream room &#123;</span><br><span class="line">  server 127.0.0.1:8080 ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upstream collider &#123;</span><br><span class="line">  server 127.0.0.1:8089 ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upstream turn &#123;</span><br><span class="line">  server 127.0.0.1:3033 ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name www.mydomain.com;</span><br><span class="line">  rewrite ^(.*)$ https://$host$1 permanent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  server_name mydomain.com;</span><br><span class="line">  return 301 https://www.mydomain.com$request_uri;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 443 ssl;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">  ssl_ciphers &apos;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA&apos;;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  ssl_session_cache shared:SSL:10m;</span><br><span class="line">  ssl_dhparam /opt/dhparam/keys/dhparams.pem;</span><br><span class="line"></span><br><span class="line">  ssl_certificate /etc/letsencrypt/live/mydomain.com/fullchain.pem;</span><br><span class="line">  ssl_certificate_key /etc/letsencrypt/live/mydomain.com/privkey.pem;</span><br><span class="line">  server_name www.mydomain.com;</span><br><span class="line"></span><br><span class="line">  location /collider &#123;</span><br><span class="line">    proxy_pass http://collider;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location /turn &#123;</span><br><span class="line">    add_header &apos;Access-Control-Allow-Origin&apos; &apos;*&apos;;</span><br><span class="line">    add_header &apos;Access-Control-Allow-Methods&apos; &apos;GET, POST, OPTIONS&apos;;</span><br><span class="line">    proxy_pass http://turn;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://room;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ service nginx restart</span><br></pre></td></tr></table></figure>

                    
                        

                    
                    
                        <p>
                            <a href="/2016/09/29/Install-WebRTC-AppRTC-Server/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2016/08/19/Install-Tensorflow-on-Ubuntu-16-04-with-NVidia-GPU-accelerating/">
                            Install Tensorflow on Ubuntu 16.04 with NVidia GPU accelerating
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2016-08-19T15:04:00+08:00">
	
		    8月 19, 2016
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Install-Tensorflow-on-Ubuntu-16-04-with-NVidia-GPU-accelerating"><a href="#Install-Tensorflow-on-Ubuntu-16-04-with-NVidia-GPU-accelerating" class="headerlink" title="Install Tensorflow on Ubuntu 16.04 with NVidia GPU accelerating"></a>Install Tensorflow on Ubuntu 16.04 with NVidia GPU accelerating</h2><p>Hardware: Lenovo T450, CPU i7-5500U CPU @ 2.40GHz, Graphics Card GeForce 940m.</p>
<h3 id="Install-Virtualenv"><a href="#Install-Virtualenv" class="headerlink" title="Install Virtualenv"></a>Install Virtualenv</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install python-pip python-dev python-virtualenv</span><br><span class="line">$ makedir  ~/env</span><br><span class="line">$ virtualenv --system-site-packages ~/env/tensorflow</span><br><span class="line">$ <span class="built_in">printf</span> <span class="string">'\nalias tensorflow="source ~/env/tensorflow/bin/activate"'</span> &gt;&gt; ~/.bashrc</span><br><span class="line">$ <span class="built_in">source</span> ~/.bashrc</span><br><span class="line">$ tensorflow</span><br><span class="line">(tensorflow)$ deactivate</span><br></pre></td></tr></table></figure>
<h3 id="Install-Other-Dependencies"><a href="#Install-Other-Dependencies" class="headerlink" title="Install Other Dependencies"></a>Install Other Dependencies</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install python-numpy python-wheel python-imaging swig</span><br></pre></td></tr></table></figure>
<h3 id="Install-JDK-Bazel-dependency"><a href="#Install-JDK-Bazel-dependency" class="headerlink" title="Install JDK (Bazel dependency)"></a>Install JDK (Bazel dependency)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install software-properties-common</span><br><span class="line">$ sudo add-apt-repository ppa:webupd8team/java</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install oracle-java8-installer</span><br><span class="line">$ java -version</span><br><span class="line">java version <span class="string">"1.8.0_101"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_101-b13)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.101-b13, mixed mode)</span><br></pre></td></tr></table></figure>
<h3 id="Install-Bazel"><a href="#Install-Bazel" class="headerlink" title="Install Bazel"></a>Install Bazel</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install pkg-config zip g++ zlib1g-dev unzip  </span><br><span class="line">$ wget https://github.com/bazelbuild/bazel/releases/download/0.3.1/bazel-0.3.1-installer-linux-x86_64.sh</span><br><span class="line">$ chmod +x bazel-0.3.1-installer-linux-x86_64.sh</span><br><span class="line">$ ./bazel-0.3.1-installer-linux-x86_64.sh --user</span><br><span class="line">$ <span class="built_in">printf</span> <span class="string">'\nexport PATH=$PATH:$HOME/bin'</span> &gt;&gt; ~/.bashrc</span><br><span class="line">$ <span class="built_in">source</span> ~/.bashrc</span><br><span class="line">$ bazel version</span><br><span class="line">Build label: 0.3.1</span><br><span class="line">Build target: bazel-out/<span class="built_in">local</span>-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar</span><br><span class="line">Build time: Fri Jul 29 09:09:52 2016 (1469783392)</span><br><span class="line">Build timestamp: 1469783392</span><br><span class="line">Build timestamp as int: 1469783392</span><br></pre></td></tr></table></figure>
<h3 id="Install-CUDA-Software"><a href="#Install-CUDA-Software" class="headerlink" title="Install CUDA Software"></a>Install CUDA Software</h3><p>Register NVIDIA <a href="https://developer.nvidia.com/accelerated-computing-developer" target="_blank" rel="noopener">Accelerated Computer Developer Program</a></p>
<p>Download cuda-repo-ubuntu1604-8-0-rc_8.0.27-1_amd64-deb and cuda-misc-headers-8-0_8.0.27.1-1_amd64.deb from <a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="noopener">cuda download page</a>  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dpkg -i cuda-repo-ubuntu1604-8-0-rc_8.0.27-1_amd64.deb</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install cuda</span><br><span class="line">$ sudo dpkg -i cuda-misc-headers-8-0_8.0.27.1-1_amd64.deb</span><br></pre></td></tr></table></figure>
<p>Download cuDNN for CUDA 8.0 RC (cuDNN v5.1 Library for Linux) from<br><a href="https://developer.nvidia.com/cudnn" target="_blank" rel="noopener">cuDNN download page</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ tar xvzf cudnn-8.0-linux-x64-v5.1.tgz</span><br><span class="line">$ sudo cp cuda/include/cudnn.h /usr/local/cuda/include</span><br><span class="line">$ sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64</span><br><span class="line">$ sudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn*</span><br><span class="line">$ printf &apos;\nexport LD_LIBRARY_PATH=&quot;$LD_LIBRARY_PATH:/usr/local/cuda/lib64&quot;&apos; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>
<h3 id="Install-TensorFlow-from-source"><a href="#Install-TensorFlow-from-source" class="headerlink" title="Install TensorFlow from source"></a>Install TensorFlow from source</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> --recurse-submodules https://github.com/tensorflow/tensorflow</span><br><span class="line">$ <span class="built_in">cd</span> tensorflow</span><br><span class="line">$ ./configure</span><br><span class="line">Please specify the location of python. [Default is /usr/bin/python]:</span><br><span class="line">Do you wish to build TensorFlow with Google Cloud Platform support? [y/N] N</span><br><span class="line">No Google Cloud Platform support will be enabled <span class="keyword">for</span> TensorFlow</span><br><span class="line">Do you wish to build TensorFlow with GPU support? [y/N] y</span><br><span class="line">GPU support will be enabled <span class="keyword">for</span> TensorFlow</span><br><span class="line">Please specify <span class="built_in">which</span> gcc nvcc should use as the host compiler. [Default is /usr/bin/gcc]:</span><br><span class="line">Please specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]:</span><br><span class="line">Please specify the location <span class="built_in">where</span> CUDA  toolkit is installed. Refer to README.md <span class="keyword">for</span> more details. [Default is /usr/<span class="built_in">local</span>/cuda]:</span><br><span class="line">Please specify the Cudnn version you want to use. [Leave empty to use system default]:</span><br><span class="line">Please specify the location <span class="built_in">where</span> cuDNN  library is installed. Refer to README.md <span class="keyword">for</span> more details. [Default is /usr/<span class="built_in">local</span>/cuda]:</span><br><span class="line">Please specify a list of comma-separated Cuda compute capabilities you want to build with.</span><br><span class="line">You can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.</span><br><span class="line">Please note that each additional compute capability significantly increases your build time and binary size.</span><br><span class="line">[Default is: <span class="string">"3.5,5.2"</span>]: 3.0</span><br><span class="line">Setting up Cuda include</span><br><span class="line">Setting up Cuda lib64</span><br><span class="line">Setting up Cuda bin</span><br><span class="line">Setting up Cuda nvvm</span><br><span class="line">Setting up CUPTI include</span><br><span class="line">Setting up CUPTI lib64</span><br><span class="line">Configuration finished</span><br><span class="line"></span><br><span class="line">$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package</span><br></pre></td></tr></table></figure>
<p>The build may fail several times, just need to re-run the command. And if the following error happens:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">external/gif_archive/giflib-5.1.4/lib/gif_err.c:10:29: fatal error: gif_lib_private.h: No such file or directory</span><br></pre></td></tr></table></figure>
<p>Just re-run the configure:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ ./configure</span><br><span class="line">Please specify the location of python. [Default is /usr/bin/python]:</span><br><span class="line">Do you wish to build TensorFlow with Google Cloud Platform support? [y/N] N</span><br><span class="line">No Google Cloud Platform support will be enabled for TensorFlow</span><br><span class="line">Do you wish to build TensorFlow with GPU support? [y/N] y</span><br><span class="line">GPU support will be enabled for TensorFlow</span><br><span class="line">Please specify which gcc nvcc should use as the host compiler. [Default is /usr/bin/gcc]:</span><br><span class="line">Please specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]:</span><br><span class="line">Please specify the location where CUDA  toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:</span><br><span class="line">Please specify the Cudnn version you want to use. [Leave empty to use system default]:</span><br><span class="line">Please specify the location where cuDNN  library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:</span><br><span class="line">Please specify a list of comma-separated Cuda compute capabilities you want to build with.</span><br><span class="line">You can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.</span><br><span class="line">Please note that each additional compute capability significantly increases your build time and binary size.</span><br><span class="line">[Default is: &quot;3.5,5.2&quot;]: 3.0</span><br><span class="line">Setting up Cuda include</span><br><span class="line">Setting up Cuda lib64</span><br><span class="line">Setting up Cuda bin</span><br><span class="line">Setting up Cuda nvvm</span><br><span class="line">Setting up CUPTI include</span><br><span class="line">Setting up CUPTI lib64</span><br><span class="line">Configuration finished</span><br></pre></td></tr></table></figure>
<p>Then re-run the build and continue to generate wheel and install it in virtualenv.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ bazel-bin/tensorflow/tools/pip_package/build_pip_package ~/tensorflow/bin</span><br><span class="line">$ tensorflow</span><br><span class="line">(tensorflow)$ sudo pip install ~/tensorflow/bin/~/tensorflow/bin/tensorflow-0.10.0rc0-py2-none-any.whl</span><br></pre></td></tr></table></figure>
<h3 id="Verify-the-installation"><a href="#Verify-the-installation" class="headerlink" title="Verify the installation"></a>Verify the installation</h3><p>Notice: do not try to run the following commands from tensorflow source folder. Otherwise, may encounter import tensorflow error:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import tensorflow as tf</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">  File &quot;tensorflow/__init__.py&quot;, line 23, in &lt;module&gt;</span><br><span class="line">    from tensorflow.python import *</span><br><span class="line">  File &quot;tensorflow/python/__init__.py&quot;, line 48, in &lt;module&gt;</span><br><span class="line">    from tensorflow.python import pywrap_tensorflow</span><br><span class="line">ImportError: cannot import name pywrap_tensorflow</span><br></pre></td></tr></table></figure>
<p>Normal case should be like:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(tensorflow)$ python</span><br><span class="line">Python 2.7.12 (default, Jul  1 2016, 15:12:24)</span><br><span class="line">[GCC 5.4.0 20160609] on linux2</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import tensorflow as tf</span><br><span class="line">I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally</span><br><span class="line">I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally</span><br><span class="line">I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally</span><br><span class="line">I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so.1 locally</span><br><span class="line">I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally</span><br><span class="line">&gt;&gt;&gt; a = tf.constant(10)</span><br><span class="line">&gt;&gt;&gt; b = tf.constant(22)</span><br><span class="line">&gt;&gt;&gt; c = a + b</span><br><span class="line">&gt;&gt;&gt; session = tf.Session()</span><br><span class="line">&gt;&gt;&gt; print session.run(c)</span><br><span class="line">32</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

                    
                        

                    
                    
                        <p>
                            <a href="/2016/08/19/Install-Tensorflow-on-Ubuntu-16-04-with-NVidia-GPU-accelerating/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2016/06/01/Python-debug-with-PDB/">
                            Python debug with PDB
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2016-06-01T18:18:18+08:00">
	
		    6月 01, 2016
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="PDB调试启动方式"><a href="#PDB调试启动方式" class="headerlink" title="PDB调试启动方式"></a>PDB调试启动方式</h2><ul>
<li>对于从命令行运行的程序</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> python -m pdb myscript.py</span></span><br></pre></td></tr></table></figure>
<ul>
<li>对于较为复杂大型程序或者需要特殊脚本启动的程序</li>
</ul>
<p>在感兴趣的代码中插入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pdb</span><br><span class="line">pdb.set_trace()</span><br></pre></td></tr></table></figure>
<p>然后用原有的方式启动，程序运行到代码段会进入PDB调试状态</p>
<ul>
<li>在Python REPL中调试</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pdb</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> mymodule</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pdb.run(<span class="string">'mymodule.test()'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="常用PDB命令"><a href="#常用PDB命令" class="headerlink" title="常用PDB命令"></a>常用PDB命令</h2><ul>
<li>帮助命令</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) h</span><br><span class="line">Documented commands (type help &lt;topic&gt;):</span><br><span class="line">========================================</span><br><span class="line">EOF    bt         cont      enable  jump  pp       run      unt</span><br><span class="line">a      c          continue  exit    l     q        s        until</span><br><span class="line">alias  cl         d         h       list  quit     step     up</span><br><span class="line">args   clear      debug     help    n     r        tbreak   w</span><br><span class="line">b      commands   disable   ignore  next  restart  u        whatis</span><br><span class="line">break  condition  down      j       p     return   unalias  where</span><br><span class="line"></span><br><span class="line">Miscellaneous help topics:</span><br><span class="line">==========================</span><br><span class="line">exec  pdb</span><br><span class="line"></span><br><span class="line">Undocumented commands:</span><br><span class="line">======================</span><br><span class="line">retval  rv</span><br></pre></td></tr></table></figure>
<ul>
<li>查看当前代码片段</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) l</span><br><span class="line">  1  -&gt;	import mysql.connector</span><br><span class="line">  2  	from mysql.connector import fabric</span><br><span class="line">  3  	from mysql.connector import errors</span><br><span class="line">  4  	import time</span><br><span class="line">  5  	config = &#123;</span><br><span class="line">  6  	    &apos;fabric&apos;: &#123;</span><br><span class="line">  7  	        &apos;host&apos;: &apos;localhost&apos;,</span><br><span class="line">  8  	        &apos;port&apos;: 32274,</span><br><span class="line">  9  	        &apos;username&apos;: &apos;admin&apos;,</span><br><span class="line"> 10  	        &apos;password&apos;: &apos;admin&apos;,</span><br><span class="line"> 11  	        &apos;report_errors&apos;: True</span><br></pre></td></tr></table></figure>
<ul>
<li>设置断点</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) b 122</span><br></pre></td></tr></table></figure>
<ul>
<li>设置条件断点</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) b 122, a == 2</span><br></pre></td></tr></table></figure>
<ul>
<li>清除断点</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) cl(ear)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) cl(ear) 2</span><br></pre></td></tr></table></figure>
<ul>
<li>禁用／激活断点</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) disable 3</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) enable 3</span><br></pre></td></tr></table></figure>
<ul>
<li>单步执行</li>
</ul>
<p>Step over</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) n(ext)</span><br></pre></td></tr></table></figure>
<p>Step into</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) s(tep)</span><br></pre></td></tr></table></figure>
<ul>
<li>继续执行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) c(ont(inue))</span><br></pre></td></tr></table></figure>
<ul>
<li>跳转</li>
</ul>
<p>跳转不会执行被跳过的代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) j(ump) 18</span><br></pre></td></tr></table></figure>
<ul>
<li>打印变量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) p fcnx</span><br></pre></td></tr></table></figure>
<ul>
<li>打印当前函数的参数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) a(rgs)</span><br></pre></td></tr></table></figure>
<ul>
<li>执行表达式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) !fcnx=None</span><br></pre></td></tr></table></figure>
<ul>
<li>重新启动调试器</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) run [args]</span><br></pre></td></tr></table></figure>
<ul>
<li>退出调试</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Pdb) q(uit)</span><br></pre></td></tr></table></figure>

                    
                        

                    
                    
                        <p>
                            <a href="/2016/06/01/Python-debug-with-PDB/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2016/04/28/Open-edX-Analytics-devstack-on-Ubuntu-without-Vagrant/">
                            Open edX Analytics devstack on Ubuntu without Vagrant
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2016-04-28T16:32:04+08:00">
	
		    4月 28, 2016
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Open-edX-Analytics-devstack-on-Ubuntu-without-Vagrant"><a href="#Open-edX-Analytics-devstack-on-Ubuntu-without-Vagrant" class="headerlink" title="Open edX Analytics devstack on Ubuntu without Vagrant"></a>Open edX Analytics devstack on Ubuntu without Vagrant</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ssh root@123.56.40.252</span><br><span class="line"><span class="comment"># adduser ubuntu</span></span><br><span class="line"><span class="comment"># chmod +w /etc/sudoers</span></span><br><span class="line"><span class="comment"># vim /etc/sudoers</span></span><br></pre></td></tr></table></figure>
<p>Add following line into the file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ubuntu  ALL=(ALL:ALL) ALL</span><br></pre></td></tr></table></figure>
<p>Make it looks like:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"># User privilege specification</span><br><span class="line">root    ALL=(ALL:ALL) ALL</span><br><span class="line">ubuntu  ALL=(ALL:ALL) ALL</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># chmod -w /etc/sudoers</span><br><span class="line"># su - ubuntu</span><br><span class="line">$ git clone https://github.com/edx/edx-analytics-pipeline</span><br><span class="line">$ cd edx-analytics-pipeline</span><br><span class="line">$ source venv/bin/activate</span><br><span class="line">(venv)$ make bootstrap</span><br></pre></td></tr></table></figure>
                    
                        

                    
                    
                        <p>
                            <a href="/2016/04/28/Open-edX-Analytics-devstack-on-Ubuntu-without-Vagrant/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2016/04/21/Open-edX-devstack-on-Ubuntu-without-Vagrant/">
                            Open edX devstack on Ubuntu without Vagrant
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2016-04-21T18:21:33+08:00">
	
		    4月 21, 2016
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Install-open-edX-devstack-on-Ubuntu-14-04-directly"><a href="#Install-open-edX-devstack-on-Ubuntu-14-04-directly" class="headerlink" title="Install open edX devstack on Ubuntu 14.04 directly"></a>Install open edX devstack on Ubuntu 14.04 directly</h2><p>Launch EC2 instance with 2 vCPUs 4G memory</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -i .ssh/aws-es.pem ubuntu@54.199.222.211</span><br><span class="line">$ sudo apt-get update -y</span><br><span class="line">$ sudo apt-get upgrade -y</span><br><span class="line">$ sudo reboot</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -i .ssh/aws-es.pem ubuntu@54.199.222.211</span><br><span class="line">$ <span class="built_in">export</span> OPENEDX_RELEASE=named-release/dogwood</span><br><span class="line">$ wget https://raw.githubusercontent.com/edx/configuration/master/util/install/ansible-bootstrap.sh</span><br><span class="line">$ chmod +x ansible-bootstrap.sh</span><br><span class="line">$ sudo ./ansible-bootstrap.sh</span><br><span class="line">$ grep -rl <span class="string">"vagrant"</span> /edx/app/edx_ansible/edx_ansible/playbooks/roles/local_dev/</span><br><span class="line">$ grep -rl <span class="string">"vagrant"</span> /edx/app/edx_ansible/edx_ansible/playbooks/roles/local_dev/ | xargs sudo sed -i <span class="string">'s/vagrant/ubuntu/g'</span></span><br><span class="line">$ sudo sed -i <span class="string">'/edxapp_user: edxapp/ a\edxapp_ruby_version: "1.9.3-p551"'</span> /edx/app/edx_ansible/edx_ansible/playbooks/roles/edxapp/defaults/main.yml</span><br><span class="line">$ sudo sed -i <span class="string">'/- name: git checkout edx_ansible repo into edx_ansible_code_dir/ a\  ignore_errors: yes'</span> /edx/app/edx_ansible/edx_ansible/playbooks/roles/edx_ansible/tasks/deploy.yml</span><br><span class="line">$ sudo sed -i <span class="string">'/- edxapp_common/ a\  - role: rbenv\n    rbenv_user: "&#123;&#123; edxapp_user &#125;&#125;"\n    rbenv_dir: "&#123;&#123; edxapp_app_dir &#125;&#125;"\n    rbenv_ruby_version: "&#123;&#123; edxapp_ruby_version &#125;&#125;"'</span> /edx/app/edx_ansible/edx_ansible/playbooks/roles/edxapp/meta/main.yml</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim devstack.sh</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -d /edx/app/edx_ansible ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Error: Base box is missing provisioning scripts."</span> 1&gt;&amp;2</span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">OPENEDX_RELEASE=named-release/dogwood</span><br><span class="line"><span class="built_in">export</span> PYTHONUNBUFFERED=1</span><br><span class="line"><span class="built_in">source</span> /edx/app/edx_ansible/venvs/edx_ansible/bin/activate</span><br><span class="line"><span class="built_in">export</span> PIP_REQUIRE_VIRTUALENV=<span class="literal">true</span></span><br><span class="line"><span class="built_in">export</span> PIP_RESPECT_VIRTUALENV=<span class="literal">true</span></span><br><span class="line"><span class="built_in">cd</span> /edx/app/edx_ansible/edx_ansible/playbooks</span><br><span class="line"></span><br><span class="line"><span class="comment"># Did we specify an openedx release?</span></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$OPENEDX_RELEASE</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">  EXTRA_VARS=<span class="string">"-e edx_platform_version=<span class="variable">$OPENEDX_RELEASE</span> \</span></span><br><span class="line"><span class="string">    -e certs_version=<span class="variable">$OPENEDX_RELEASE</span> \</span></span><br><span class="line"><span class="string">    -e forum_version=<span class="variable">$OPENEDX_RELEASE</span> \</span></span><br><span class="line"><span class="string">    -e xqueue_version=<span class="variable">$OPENEDX_RELEASE</span> \</span></span><br><span class="line"><span class="string">  "</span></span><br><span class="line">  CONFIG_VER=<span class="variable">$OPENEDX_RELEASE</span></span><br><span class="line">  <span class="comment"># Need to ensure that the configuration repo is updated</span></span><br><span class="line">  <span class="comment"># The vagrant-devstack.yml playbook will also do this, but only</span></span><br><span class="line">  <span class="comment"># after loading the playbooks into memory.  If these are out of date,</span></span><br><span class="line">  <span class="comment"># this can cause problems (e.g. looking for templates that no longer exist).</span></span><br><span class="line">  /edx/bin/update configuration <span class="variable">$CONFIG_VER</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  CONFIG_VER=<span class="string">"master"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">ansible-playbook -i localhost, -c <span class="built_in">local</span> run_role.yml -e role=edx_ansible -e configuration_version=<span class="variable">$CONFIG_VER</span> <span class="variable">$EXTRA_VARS</span></span><br><span class="line">ansible-playbook -i localhost, -c <span class="built_in">local</span> vagrant-devstack.yml -e configuration_version=<span class="variable">$CONFIG_VER</span> <span class="variable">$EXTRA_VARS</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x devstack.sh</span><br><span class="line">$ sudo ./devstack.sh</span><br></pre></td></tr></table></figure>
<p>After installation, try to run studio:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo su edxapp</span><br><span class="line">$ paver devstack studio</span><br></pre></td></tr></table></figure>
<p>Faild due to bundle not installed, looks like Ruby/Gems/Bundle files installed under /edx/app/edxapp/.gems, but not installed properly. Then reinstall them.</p>
<p>Set edxapp user environment varibles, execute following commands as ubuntu user.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sed -i <span class="string">'/SKIP_WS_MIGRATIONS="1"/ a\export GEM_HOME="/edx/app/edxapp/.gem"\nexport CONFIG_ROOT="/edx/app/edxapp"\nexport GEM_PATH="/edx/app/edxapp/.gem"\nexport RBENV_ROOT="/edx/app/edxapp/.rbenv"'</span> /edx/app/edxapp/edxapp_env</span><br><span class="line">$ sudo sed -i <span class="string">'/export PATH=/ c\export PATH="/edx/app/edxapp/venvs/edxapp/bin:/edx/app/edxapp/edx-platform/bin:/edx/app/edxapp/.rbenv/bin:/edx/app/edxapp/.rbenv/shims:/edx/app/edxapp/.gem/bin:/edx/app/edxapp/edx-platform/node_modules/.bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"'</span> /edx/app/edxapp/edxapp_env</span><br><span class="line">$ sudo sed -i <span class="string">'/1.9.3/ c\1.9.3-p551'</span> /edx/app/edxapp/edx-platform/.ruby-version</span><br></pre></td></tr></table></figure>
<p>The following commands executed with user edxapp, refer to steps in /edx/app/edx_ansible/edx_ansible/playbooks/roles/rbenv/tasks/main.yml.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sudo su edxapp</span><br><span class="line">$ rbenv versions | grep 1.9.3-p551</span><br><span class="line">$ rbenv install 1.9.3-p551</span><br><span class="line">$ rbenv global 1.9.3-p551</span><br><span class="line">$ gem install bundler -v 1.11.2</span><br><span class="line">$ gem install rake -v 10.4.2</span><br><span class="line">$ gem install rubygems-update &amp;&amp; update_rubygems</span><br><span class="line">$ rbenv <span class="built_in">rehash</span></span><br></pre></td></tr></table></figure>
<p>Then run studio again, it works but could not be accessed from remote, the firewall of EC2 blocked the inbound request. Just add new rule with port 8001 to security group, then everything looks fine.</p>
<p>To run studio without pip install requirements every time, set environment varible:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NO_PREREQ_INSTALL=True</span><br></pre></td></tr></table></figure></p>

                    
                        

                    
                    
                        <p>
                            <a href="/2016/04/21/Open-edX-devstack-on-Ubuntu-without-Vagrant/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2016/04/21/Install-Magento-1-9-x-on-Ubuntu/">
                            Install Magento 1.9.x on Ubuntu
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2016-04-21T18:07:01+08:00">
	
		    4月 21, 2016
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Install-Magento-1-9-x-on-Aliyun"><a href="#Install-Magento-1-9-x-on-Aliyun" class="headerlink" title="Install Magento 1.9.x on Aliyun"></a>Install Magento 1.9.x on Aliyun</h2><h3 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h3><p>Aliyun, Ubuntu 14.04LTS, 101.200.167.187</p>
<h3 id="Install-LNMP"><a href="#Install-LNMP" class="headerlink" title="Install LNMP"></a>Install LNMP</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ssh root@101.200.167.187</span><br><span class="line"><span class="comment"># wget http://soft.vpser.net/lnmp/lnmp1.2-full.tar.gz</span></span><br><span class="line"><span class="comment"># tar zxf lnmp1.2-full.tar.gz</span></span><br><span class="line"><span class="comment"># cd lnmp1.2-full</span></span><br><span class="line"><span class="comment"># vim include/mysql.sh</span></span><br></pre></td></tr></table></figure>
<p>Add InnoDB engine to MySQL installation script:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1</span><br></pre></td></tr></table></figure>
<p>Please notice the section, looks like:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Install_MySQL_56()</span><br><span class="line">&#123;</span><br><span class="line">...</span><br><span class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr/<span class="built_in">local</span>/mysql -DEXTRA_CHARSETS=all -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DWITH_READLINE=1 -DWITH_SSL=bundled -DWITH_ZLIB=system -DWITH_EMBEDDED_SERVER=1 -DENABLED_LOCAL_INFILE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 <span class="variable">$&#123;MySQL55MAOpt&#125;</span></span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ./install.sh lnmp</span></span><br></pre></td></tr></table></figure>
<p>MySQL root password: xxxxx<br>MySQL 5.6.23<br>PHP 5.6.9<br>Memory Allocator TCMalloc<br>(after about 1 hour build and installation)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">+------------------------------------------------------------------------+</span><br><span class="line">|          LNMP V1.2 for Ubuntu Linux Server, Written by Licess          |</span><br><span class="line">+------------------------------------------------------------------------+</span><br><span class="line">|         For more information please visit http://www.lnmp.org          |</span><br><span class="line">+------------------------------------------------------------------------+</span><br><span class="line">|    lnmp status manage: lnmp &#123;start|stop|reload|restart|kill|status&#125;    |</span><br><span class="line">+------------------------------------------------------------------------+</span><br><span class="line">|  phpMyAdmin: http://IP/phpmyadmin/                                     |</span><br><span class="line">|  phpinfo: http://IP/phpinfo.php                                        |</span><br><span class="line">|  Prober:  http://IP/p.php                                              |</span><br><span class="line">+------------------------------------------------------------------------+</span><br><span class="line">|  Add VirtualHost: lnmp vhost add                                       |</span><br><span class="line">+------------------------------------------------------------------------+</span><br><span class="line">|  Default directory: /home/wwwroot/default                              |</span><br><span class="line">+------------------------------------------------------------------------+</span><br><span class="line">|  MySQL/MariaDB root password: xxxxx                          |</span><br></pre></td></tr></table></figure>
<h3 id="Create-Database"><a href="#Create-Database" class="headerlink" title="Create Database"></a>Create Database</h3><p>Open browser <a href="http://101.200.167.187/phpmyadmin/index.php" target="_blank" rel="noopener">http://101.200.167.187/phpmyadmin/index.php</a><br>Create MySQL user and database:<br>kiwitao / xxxxx (for starting from scratch)<br>magento / xxxxx (for Sample Data)</p>
<h3 id="Create-VHost"><a href="#Create-VHost" class="headerlink" title="Create VHost"></a>Create VHost</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lnmp vhost add</span></span><br></pre></td></tr></table></figure>
<p>Virtualhost infomation:<br>Your domain: kiuitao.com<br>Home Directory: /home/wwwroot/kiuitao.com<br>Rewrite: other<br>Enable log: yes<br>Create database: no<br>Create ftp account: no</p>
<h3 id="Install-Magento-1-9-2-4"><a href="#Install-Magento-1-9-2-4" class="headerlink" title="Install Magento 1.9.2.4"></a>Install Magento 1.9.2.4</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># wget http://www.magentocommerce.com/downloads/assets/1.9.2.4/magento-1.9.2.4.tar.gz</span><br><span class="line"># wget http://www.magentocommerce.com/downloads/assets/1.9.1.0/magento-sample-data-1.9.1.0.tar.gz</span><br><span class="line"># tar zxf magento-1.9.2.4-2016-02-23-06-04-07.tar.gz -C /home/wwwroot/kiuitao.com</span><br><span class="line"># cd /home/wwwroot/kiuitao.com</span><br><span class="line"># mv magento/* .</span><br><span class="line"># mv magento/.htaccess .</span><br><span class="line"># mv magenta/.htaccess.sample .</span><br><span class="line"># rmdir magento</span><br><span class="line"># chown -R www:www /home/wwwroot/kiuitao.com</span><br></pre></td></tr></table></figure>
<p>Open browser <a href="http://kiuitao.com/" target="_blank" rel="noopener">http://kiuitao.com/</a><br>Follow the guide on pages to finish setup, (skip Base URL check if it failed.)</p>
<p>Admin Account:<br>kvtadmin / xxxxx</p>
<p>encryption key:<br>xxxxxxxxxx</p>
<h3 id="Install-Magento-Sample-Data-1-9-1-0"><a href="#Install-Magento-Sample-Data-1-9-1-0" class="headerlink" title="Install Magento Sample Data 1.9.1.0"></a>Install Magento Sample Data 1.9.1.0</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tar jxf magento-sample-data-1.9.1.0.tar-2015-02-11-09-56-42.bz2</span></span><br><span class="line"><span class="comment"># cd magento-sample-data-1.9.1.0</span></span><br><span class="line"><span class="comment"># mysql -u magento -p -h localhost magento &lt; magento_sample_data_for_1.9.1.0.sql</span></span><br><span class="line"><span class="comment"># cp -R media /home/wwwroot/kiuitao.com/</span></span><br><span class="line"><span class="comment"># cp -R skin /home/wwwroot/kiuitao.com/</span></span><br></pre></td></tr></table></figure>
<p>Open browser <a href="http://kiuitao.com/" target="_blank" rel="noopener">http://kiuitao.com/</a><br>Follow the guide on pages to finish setup, (skip Base URL check if it failed.)</p>
<p>Admin Account:<br>kvtadmin / xxxxx</p>
<p>encryption key:<br>xxxxxxxxxx</p>

                    
                        

                    
                    
                        <p>
                            <a href="/2016/04/21/Install-Magento-1-9-x-on-Ubuntu/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2016/04/21/桃花庵歌/">
                            桃花庵歌
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2016-04-21T17:49:53+08:00">
	
		    4月 21, 2016
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="桃花庵歌"><a href="#桃花庵歌" class="headerlink" title="桃花庵歌"></a>桃花庵歌</h2><p>桃花坞里桃花庵，桃花庵下桃花仙<br>桃花仙人种桃树，又折花枝当酒钱<br>酒醒只在花前坐，酒醉还须花下眠<br>花前花后日复日，酒醉酒醒年复年<br>不愿鞠躬车马前，但愿老死花酒间<br>车尘马足贵者趣，酒盏花枝贫者缘<br>若将富贵比贫贱，一在平地一在天<br>若将贫贱比车马，他得驱驰我得闲<br>世人笑我忒疯癫，我笑世人看不穿<br>记得五陵豪杰墓，无花无酒锄作田  </p>

                    
                        

                    
                    
                        <p>
                            <a href="/2016/04/21/桃花庵歌/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2016/04/21/Open-edX-devstack-on-Ubuntu-host/">
                            Open edX devstack on Ubuntu host
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2016-04-21T17:47:25+08:00">
	
		    4月 21, 2016
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Open-edX-Devstack-Ubuntu-host"><a href="#Open-edX-Devstack-Ubuntu-host" class="headerlink" title="Open edX Devstack Ubuntu host"></a>Open edX Devstack Ubuntu host</h1><p>安装环境，Ubuntu 14.04 LTS Desktop，ThinkPad T450.</p>
<h2 id="安装VirtualBox和Vagrant"><a href="#安装VirtualBox和Vagrant" class="headerlink" title="安装VirtualBox和Vagrant"></a>安装VirtualBox和Vagrant</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vi /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
<p>在文档最后添加VirtualBox源：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb http://download.virtualbox.org/virtualbox/debian trusty contrib</span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ wget -q https://www.virtualbox.org/download/oracle_vbox.asc -O- | sudo apt-key add -</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install virtualbox-5.0</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://releases.hashicorp.com/vagrant/1.8.1/vagrant_1.8.1_x86_64.deb</span><br><span class="line">$ sudo dpkg -i vagrant_1.8.1_x86_64.deb</span><br></pre></td></tr></table></figure>
<p>安装Vagrant plugins，vagrant-vbguest等。<br>修改Vagrant所用Ruby gems服务器为淘宝的镜像： </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ grep -rl <span class="string">"https://rubygems.org"</span> /opt/vagrant/embedded/gems/ | xargs sudo sed -i <span class="string">'s/https\:\/\/rubygems.org/https\:\/\/ruby.taobao.org/g'</span></span><br><span class="line">$ grep -rl <span class="string">"https://rubygems.org"</span> /opt/vagrant/embedded/gems/</span><br><span class="line">$ vagrant plugin install vagrant-vbguest</span><br></pre></td></tr></table></figure>
<h2 id="导入provision好的devstack-box"><a href="#导入provision好的devstack-box" class="headerlink" title="导入provision好的devstack box"></a>导入provision好的devstack box</h2><p>安装配置sftp server，用于传输文件，也可以用其它方式。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install openssh-server</span><br><span class="line">$ sudo addgroup sftp-users</span><br><span class="line">$ sudo adduser alice</span><br><span class="line">$ sudo usermod -G sftp-users -s /bin/<span class="literal">false</span> alice</span><br><span class="line">$ sudo addgroup ssh-users</span><br><span class="line">$ sudo usermod -a -G ssh-users jinpeng</span><br><span class="line">$ sudo mkdir /home/sftp_root</span><br><span class="line">$ sudo mkdir /home/sftp_root/shared</span><br><span class="line">$ sudo chown jinpeng:sftp-users /home/sftp_root/shared</span><br><span class="line">$ sudo chmod 770 /home/sftp_root/shared</span><br><span class="line">$ sudo vi /etc/ssh/sshd_config </span><br><span class="line">$ sudo reboot now</span><br></pre></td></tr></table></figure>
<p>其中在sshd_config中最后面添加以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">AllowGroups ssh-users sftp-users</span><br><span class="line">Match Group sftp-users</span><br><span class="line">    ChrootDirectory /home/sftp_root</span><br><span class="line">    AllowTcpForwarding no</span><br><span class="line">    X11Forwarding no</span><br><span class="line">    ForceCommand internal-sftp</span><br></pre></td></tr></table></figure>
<p>生成ssh key，在devstack的Vagranfile中使用到：  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir ~/.ssh</span><br><span class="line">$ ssh-keygen</span><br></pre></td></tr></table></figure>
<p>安装NFS服务：  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install nfs-common nfs-kernel-server</span><br></pre></td></tr></table></figure>
<p>导入provision好的devstack box:   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vagrant box add dogwood-devstack-provisioned ~/Download/devstack_mac.box</span><br></pre></td></tr></table></figure>
<h2 id="启动虚拟机"><a href="#启动虚拟机" class="headerlink" title="启动虚拟机"></a>启动虚拟机</h2><p>启动虚拟机：  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir ~/openedx</span><br><span class="line">$ <span class="built_in">cd</span> openedx</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/jinpeng/openedx/devstack</span><br><span class="line">$ <span class="built_in">cd</span> devstack</span><br><span class="line">$ vagrant up</span><br></pre></td></tr></table></figure>
<p>如果遇到ssh authentication问题：  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-copy-id vagrant@192.168.33.10</span><br><span class="line">$ vagrant reload</span><br></pre></td></tr></table></figure>
<h2 id="解决googleapis的问题"><a href="#解决googleapis的问题" class="headerlink" title="解决googleapis的问题"></a>解决googleapis的问题</h2><p>由于众所周知的原因，open edX用到的fonts.googleapis.com，ajax.googleapis.com等</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/openedx/devstack</span><br><span class="line">$ grep -rl <span class="string">"ajax.googleapis.com"</span> edx-platform | xargs sudo sed -i <span class="string">'s/ajax.googleapis.com/ajax.useso.com/g'</span></span><br><span class="line">$ vagrant ssh</span><br><span class="line">$ sudo vi /edx/app/edxapp/venvs/edxapp/lib/python2.7/site-packages/debug_toolbar/settings.py</span><br></pre></td></tr></table></figure>
<h2 id="启动Studio"><a href="#启动Studio" class="headerlink" title="启动Studio"></a>启动Studio</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/openedx/devstack</span><br><span class="line">$ vagrant ssh</span><br><span class="line">$ sudo su edxapp</span><br><span class="line">$ paver devstack studio</span><br></pre></td></tr></table></figure>
<p>在host上打开浏览器，访问：<br><a href="http://192.168.33.10:8001/" target="_blank" rel="noopener">http://192.168.33.10:8001/</a><br>可以看到studio的登录界面，用预置账户staff@example.com / edx登录。</p>

                    
                        

                    
                    
                        <p>
                            <a href="/2016/04/21/Open-edX-devstack-on-Ubuntu-host/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2015/12/17/Go-Programming-Lanauges-Reading-Notes-Chapter-1/">
                            Go Programming Lanauges Reading Notes Chapter 1
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2015-12-17T10:32:52+08:00">
	
		    12月 17, 2015
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h1><h2 id="1-1-Hellow-World"><a href="#1-1-Hellow-World" class="headerlink" title="1.1 Hellow, World"></a>1.1 Hellow, World</h2><ol>
<li>Go is compiled language, go toolchain convert source code into native machine instructions.</li>
<li>go command, and its subcommands: run, build, get</li>
<li>Go source code file structure: package, imports, declarations of functions, variables, constants and types.</li>
<li>Go code is organized into packages. Standard library has more than 100 packages.</li>
<li>Package main is a special package for standalone executable program.</li>
<li>Import exactly the packages needed.</li>
<li>Function declaration: func NAME PARAM_LIST RETURN_LIST.</li>
<li>Semicolon is not required at the end of line, but newline following certain tokens is converted into semicolon.</li>
<li>Strong stance on code formatting. gofmt tool and go command fmt subcommand.</li>
<li>goimports tool: go get golang.org/x/tools/cmd/goimports</li>
</ol>
<h2 id="1-2-Command-Line-Arguments"><a href="#1-2-Command-Line-Arguments" class="headerlink" title="1.2 Command-Line Arguments"></a>1.2 Command-Line Arguments</h2><ol>
<li>os package provides functions and values for dealing with OS in a platform independent way.</li>
<li>os.Args is a variable for command-line arguments. It is a slice of strings.</li>
<li>Slice s: s[i], s[m:n], len(s)</li>
<li>All indexing in Go uses half-open intervals: include the first and exclude the last, s[m:n].</li>
<li>os.Args[0] is the name of the command itself. Arguments are os.Args[1:len(os.Args)], or os.Args[1:].</li>
<li>By convention, we describe package in a comment immediately preceding package declaration. For main package, this comment describes the program as a whole.</li>
<li>Variable not explicitly initialized is implicitely initialized to zero value for its type, 0 for numeric types and empty string “” for strings.</li>
<li>Go provides usual arithmetic and logical operators.</li>
<li>Each arithmetic and logical operator has corresponding assignment operator, like +=, *=.</li>
<li>Arithemtic operator + could concatenate two strings.</li>
<li>Short variable declaration i := 1.</li>
<li>Increment and decrement statements i++/i— are statements, not expressions in C-like languages, and are only postfix. So j = i++ or ++i are both illegal.</li>
<li><p>for loop has several forms:</p>
<pre><code>for initialization; condition; post {
}

for condition {
}

for {
}

for _, arg := range os.Args[1:] {
}
</code></pre></li>
<li><p>Blank identifier _ is used whenever syntax requires a variable name but program logic does not.</p>
</li>
<li><p>Several ways to declare varaible:</p>
<pre><code>s := &quot;&quot;           // shore variable declaration
var s string      // default initialization
var s = &quot;&quot;        // ususally for multiple variables
var string = &quot;&quot;   // used when variable type and intial value type are not same
</code></pre></li>
<li><p>string.Join function</p>
</li>
<li>fmt.Println(os.Args[1:])</li>
</ol>
<h2 id="1-3-Finding-Duplicated-Lines"><a href="#1-3-Finding-Duplicated-Lines" class="headerlink" title="1.3 Finding Duplicated Lines"></a>1.3 Finding Duplicated Lines</h2><ol>
<li>A map hold a set of key/value pairs and provides constant-time operations to store, retrieve, or test for an item in the set.</li>
<li>map key can be any type whose values can be compared with ==, value can be any type.</li>
<li>If map does not contain key, map[key] return zero value to its type.</li>
<li>The order of map iteration is intentional random.</li>
<li>bufio.Scanner is the most useful feature for input/output.</li>
<li><p>fmt.Printf</p>
<pre><code> %d                decimal integer
 %x, %o, %b        hexadecimal, octal, binary
 %f, %g, %e        floating point number
 %t                boolean
 %c                rune(Unicode code point)
 %s                string
 %q                quoted string &quot;abc&quot; or rune &#39;c&#39;
 %v                any value in natural format
 %T                type of any value
 %%                literal percent sign(no operand)
</code></pre></li>
<li><p>escape sequences: \t \n</p>
</li>
<li>fmt.Println formats arguments as if by %v, followed by a newline.</li>
<li>os.Open returns two values, an open file (*os.File) and error type. If error equals nil, the file opened successfully.</li>
<li>Functions and other package level entities may be declared in any order.</li>
<li>A map is a reference to the data structure created by make. Pass a map to a function, the function receives a copy of the reference, any modification in the function will be visible to reference held by the caller.</li>
<li>ioutil.ReadFile return a byte slice that must be converted into a string so it can be split by strings.Split.</li>
<li>bufio.Scanner, iotutil.ReadFile, ioutil.WriteFile use the Read and Write methods of *os.File.</li>
</ol>
<h2 id="1-4-Animated-GIFs"><a href="#1-4-Animated-GIFs" class="headerlink" title="1.4 Animated GIFs"></a>1.4 Animated GIFs</h2><ol>
<li>Import a package whose path has multiple components, like image/color, we refer to the package with a name that comes from the last component.</li>
<li>The value of a constant must be a number, string, or boolean.</li>
<li>Composite literals: []color.Color{…}, gif.GIF{…}.</li>
<li>A struct is a group of values called fields, often of different types, that are collected together in a single object that can be treated as a unit.</li>
<li>When init a variable of a struct with some fields’ value, other fields’ value are zero value of their type.</li>
<li>Individual fields can be accessed with dot notation.</li>
</ol>
<h2 id="1-5-Feteching-a-URL"><a href="#1-5-Feteching-a-URL" class="headerlink" title="1.5 Feteching a URL"></a>1.5 Feteching a URL</h2><ol>
<li>http.Get function makes an HTTP request and, if there is no error, returns the result in the response struct resp. The Body field contains the server response a a readable stream.</li>
<li>ioutil.ReadAll function reads the entire response.</li>
</ol>
<h2 id="1-6-Feteching-URLs-Concurrently"><a href="#1-6-Feteching-URLs-Concurrently" class="headerlink" title="1.6 Feteching URLs Concurrently"></a>1.6 Feteching URLs Concurrently</h2><ol>
<li>A gorountine is a concurrent function execution.</li>
<li>A channel is a communication mechanism that allows one gorountine to pass values of specified type to another gorountine.</li>
<li>The main function runs in a goroutine and go statement create additional gorountines.</li>
<li>When one gorountine attempts a send or receive on a channel, it blocks until another goroutine attempts the corresponding receive or send operation, at which point the value is transfered and both gorountines proceed.</li>
<li>ioutil.Discard is an io.Writer on which all Write calls succeed without doing anything.</li>
</ol>
<h2 id="1-7-A-Web-Server"><a href="#1-7-A-Web-Server" class="headerlink" title="1.7 A Web Server"></a>1.7 A Web Server</h2><ol>
<li>A handler pattern that ends with a slash matches any URL that has the pattern as a prefix.</li>
<li>Behind the scenes, the server runs the handler for each incoming request in a separate gorountine.</li>
<li>Race condition, two concurrent requests try to update the same variable at the same time.</li>
<li>One could use sync.Mutex.Lock and sync.Mutex.Unlock to avoid race conditions.</li>
<li>Four output streams, os.Stdout, a file, ioutil.Discard, http.ResponseWriter, share a common interface, io.Writer.</li>
<li>function literal, an anonymous function defined at its point of use.</li>
</ol>
<h2 id="1-8-Loose-Ends"><a href="#1-8-Loose-Ends" class="headerlink" title="1.8 Loose Ends"></a>1.8 Loose Ends</h2><ol>
<li>Control flow: if, for, switch. </li>
<li>Switch cases do not fall through from one to the next as C-like languages. fallthrough overrides this behavior. default case is optional.</li>
<li>A switch does not need an operand. It is called tagless switch. It is equivalent to switch true.</li>
<li>Switch may include an optional simple statement—a short variable declaration, an increment or assignment statement, or function call—that can be used to set a value before it is tested.</li>
<li>The break and continue statements modify the flow of control. Statements may be labeled so that break and continue can refer to them.</li>
<li>The goto statement is intended for machine-generated code.</li>
<li>Named types: A type declaration makes it possible to give a name to an existing type.</li>
<li>Pointers: The &amp; operator yields the address of a variable, and * operator retrieves the variable that the pointer refers to, but there is no pointer arithmetic.</li>
<li>Methods and interfaces: A method is a function associated with a named type. Interfaces are abstract types that treat different concrete types in the same way based on what methods they have, not how they are represented or implemented.</li>
<li>Packages: standard packages and community shared ones. Standard packages: <a href="https://golang.org/pkg" target="_blank" rel="noopener">https://golang.org/pkg</a>, community shared packages: <a href="https://godoc.org" target="_blank" rel="noopener">https://godoc.org</a>. go doc tool.</li>
<li>Comments: documentation comments at the beginning of a program or package, comments before declaration of each function are important. They can be used by go doc or godoc to locate and display documentation.</li>
<li>Comments do not nest.</li>
</ol>

                    
                        

                    
                    
                        <p>
                            <a href="/2015/12/17/Go-Programming-Lanauges-Reading-Notes-Chapter-1/#post-footer" class="postShorten-excerpt_link link">
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
          <li class="pagination-next">
            <a class="btn btn--default btn--small" href="/archives/page/2/">
              <span>下一页</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">第 1 页 共 2 页</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Dong Jinpeng. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <h4 id="about-card-name">Dong Jinpeng</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">没有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://jinpeng.github.io/2015/08/28/hello-world/">
                            <h3 class="media-heading">Hello World</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年8月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://jinpeng.github.io/2015/08/28/Greek-Alphabet/">
                            <h3 class="media-heading">Greek Alphabet</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年8月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://jinpeng.github.io/2015/12/17/Go-Programming-Lanauges-Reading-Notes-Chapter-1/">
                            <h3 class="media-heading">Go Programming Lanauges Reading Notes Chapter 1</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年12月17日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://jinpeng.github.io/2016/04/21/Open-edX-devstack-on-Ubuntu-host/">
                            <h3 class="media-heading">Open edX devstack on Ubuntu host</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年4月21日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://jinpeng.github.io/2016/04/21/桃花庵歌/">
                            <h3 class="media-heading">桃花庵歌</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年4月21日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://jinpeng.github.io/2016/04/21/Install-Magento-1-9-x-on-Ubuntu/">
                            <h3 class="media-heading">Install Magento 1.9.x on Ubuntu</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年4月21日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://jinpeng.github.io/2016/04/21/Open-edX-devstack-on-Ubuntu-without-Vagrant/">
                            <h3 class="media-heading">Open edX devstack on Ubuntu without Vagrant</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年4月21日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://jinpeng.github.io/2016/04/28/Open-edX-Analytics-devstack-on-Ubuntu-without-Vagrant/">
                            <h3 class="media-heading">Open edX Analytics devstack on Ubuntu without Vagrant</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年4月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://jinpeng.github.io/2016/06/01/Python-debug-with-PDB/">
                            <h3 class="media-heading">Python debug with PDB</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年6月1日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://jinpeng.github.io/2016/08/19/Install-Tensorflow-on-Ubuntu-16-04-with-NVidia-GPU-accelerating/">
                            <h3 class="media-heading">Install Tensorflow on Ubuntu 16.04 with NVidia GPU accelerating</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年8月19日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="没有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 12 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-yhuo2grt8r7qkqumzgjoglkfbicl1thukjgmla6jopu56zpcowfedi5zjcor.min.js"></script>
<!--SCRIPTS END-->


    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('10EH72KECT', 'a366c3ad0701974d30e9be2a4847fd11');
        var algoliaIndex = algoliaClient.initIndex('jp-hexo-blog');
    </script>


    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML' async></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
